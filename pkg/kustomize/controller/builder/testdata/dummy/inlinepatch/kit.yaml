apiVersion: packaging.k8s.io/v1alpha1
kind: Kit
metadata:
  name: coredns-base
  namespace: kube-system
spec:
  objects:
  - apiVersion: v1
    kind: Service
    metadata:
      name: coredns
      namespace: kube-system
      labels:
        k8s-app: coredns
        kubernetes.io/cluster-service: "true"
        addonmanager.kubernetes.io/mode: Reconcile
        kubernetes.io/name: "CoreDNS"
    spec:
      selector:
        k8s-app: coredns
      #clusterIP: Should be set to IP for cluster
      ports:
      - name: dns
        port: 53
        protocol: UDP
      - name: dns-tcp
        port: 53
        protocol: TCP
  patchsets:
  - patch:
      apiVersion: v1
      kind: Service
      metadata:
        name: coredns
        namespace: kube-system
      spec:
        clusterIP: 100.64.0.10
